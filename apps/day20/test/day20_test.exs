defmodule Day20Test do
  use ExUnit.Case
  doctest Day20

  test "part1" do
    assert Day20.part1() == 432
  end

  @ex1 """
           A
           A
    #######.#########
    #######.........#
    #######.#######.#
    #######.#######.#
    #######.#######.#
    #####  B    ###.#
  BC...##  C    ###.#
    ##.##       ###.#
    ##...DE  F  ###.#
    #####    G  ###.#
    #########.#####.#
  DE..#######...###.#
    #.#########.###.#
  FG..#########.....#
    ###########.#####
               Z
               Z
  """
  test "ex1" do
    assert Day20.path(@ex1, "AA", "ZZ") == 23
  end

  test "part2 ex1" do
    assert Day20.recursive_path(@ex1, "AA", "ZZ") == 26
  end


  @ex2 """
                     A
                     A
    #################.#############
    #.#...#...................#.#.#
    #.#.#.###.###.###.#########.#.#
    #.#.#.......#...#.....#.#.#...#
    #.#########.###.#####.#.#.###.#
    #.............#.#.....#.......#
    ###.###########.###.#####.#.#.#
    #.....#        A   C    #.#.#.#
    #######        S   P    #####.#
    #.#...#                 #......VT
    #.#.#.#                 #.#####
    #...#.#               YN....#.#
    #.###.#                 #####.#
  DI....#.#                 #.....#
    #####.#                 #.###.#
  ZZ......#               QG....#..AS
    ###.###                 #######
  JO..#.#.#                 #.....#
    #.#.#.#                 ###.#.#
    #...#..DI             BU....#..LF
    #####.#                 #.#####
  YN......#               VT..#....QG
    #.###.#                 #.###.#
    #.#...#                 #.....#
    ###.###    J L     J    #.#.###
    #.....#    O F     P    #.#...#
    #.###.#####.#.#####.#####.###.#
    #...#.#.#...#.....#.....#.#...#
    #.#####.###.###.#.#.#########.#
    #...#.#.....#...#.#.#.#.....#.#
    #.###.#####.###.###.#.#.#######
    #.#.........#...#.............#
    #########.###.###.#############
             B   J   C
             U   P   P               
  """
  test "ex2" do
    assert Day20.path(@ex2, "AA", "ZZ") == 58
  end

  @ex3 """
               Z L X W       C
               Z P Q B       K
    ###########.#.#.#.#######.###############
    #...#.......#.#.......#.#.......#.#.#...#
    ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###
    #.#...#.#.#...#.#.#...#...#...#.#.......#
    #.###.#######.###.###.#.###.###.#.#######
    #...#.......#.#...#...#.............#...#
    #.#########.#######.#.#######.#######.###
    #...#.#    F       R I       Z    #.#.#.#
    #.###.#    D       E C       H    #.#.#.#
    #.#...#                           #...#.#
    #.###.#                           #.###.#
    #.#....OA                       WB..#.#..ZH
    #.###.#                           #.#.#.#
  CJ......#                           #.....#
    #######                           #######
    #.#....CK                         #......IC
    #.###.#                           #.###.#
    #.....#                           #...#.#
    ###.###                           #.#.#.#
  XF....#.#                         RF..#.#.#
    #####.#                           #######
    #......CJ                       NM..#...#
    ###.#.#                           #.###.#
  RE....#.#                           #......RF
    ###.###        X   X       L      #.#.#.#
    #.....#        F   Q       P      #.#.#.#
    ###.###########.###.#######.#########.###
    #.....#...#.....#.......#...#.....#.#...#
    #####.#.###.#######.#######.###.###.#.#.#
    #.......#.......#.#.#.#.#...#...#...#.#.#
    #####.###.#####.#.#.#.#.###.###.#.###.###
    #.......#.....#.#...#...............#...#
    #############.#.#.###.###################
                 A O F   N
                 A A D   M
  """
  test "part2 ex3" do
    assert Day20.recursive_path(@ex3, "AA", "ZZ") == 396
  end
end
